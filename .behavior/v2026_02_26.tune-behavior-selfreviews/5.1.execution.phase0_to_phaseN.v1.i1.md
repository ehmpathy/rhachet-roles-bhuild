# execution: standardized self-review frame

## overview

completed template-only change. updated 2 guard files with the standardized 4-review frame.

---

## phase 1: update execution guard ✓

### prereqs
- [x] read `.behavior/v2026_02_26.tune-behavior-selfreviews/3.3.blueprint.v1.i1.md` (contracts section)

### tasks
- [x] open `src/domain.operations/behavior/init/templates/5.1.execution.phase0_to_phaseN.v1.guard`
- [x] remove `reviews.self[slug=all-done-self]`
- [x] remove `reviews.self[slug=all-done-junior]`
- [x] add the 4 standardized reviews from blueprint contracts section
- [x] verify file has no judges section (execution guard doesn't require human approval)

### acceptance
- [x] guard file contains exactly 4 self-reviews in correct priority order:
  1. `behavior.declaration.coverage`
  2. `behavior.declaration.adherance`
  3. `role.standards.adherance`
  4. `role.standards.coverage`
- [x] each review has detailed say block with junior detection language
- [x] report paths use `.behavior/$thisBehavior/reviews/{stone}.{slug}.md` pattern

---

## phase 2: update blueprint guard ✓

### prereqs
- [x] read `.behavior/v2026_02_26.tune-behavior-selfreviews/3.3.blueprint.v1.i1.md` (contracts section)

### tasks
- [x] open `src/domain.operations/behavior/init/templates/3.3.blueprint.v1.guard`
- [x] remove `reviews.self[slug=all-done-self]`
- [x] remove `reviews.self[slug=all-done-junior]`
- [x] remove `reviews.self[slug=all-simple-junior]`
- [x] add the 4 standardized reviews from blueprint contracts section
- [x] retain current judges section (blueprint guard requires human approval)

### acceptance
- [x] guard file contains exactly 4 self-reviews in correct priority order
- [x] guard file retains judges section for human approval
- [x] each review has detailed say block with junior detection language
- [x] report paths use `.behavior/$thisBehavior/reviews/{stone}.{slug}.md` pattern

### note: blueprint vs execution difference
- **blueprint guard**: references vision and criteria only (blueprint not yet written)
- **execution guard**: references vision, criteria, AND blueprint

---

## phase 3: verify build ✓

### tasks
- [x] run `npm run build`
- [x] verify no errors

### acceptance
- [x] build completes successfully
- [x] guard files copied to `dist/`

---

## phase 4: test ✓

### prereqs
- [x] read `.behavior/v2026_02_26.tune-behavior-selfreviews/3.3.blueprint.v1.i1.md` (test coverage section)

### tasks
- [x] run acceptance tests: `npm run test:acceptance`
- [x] updated test assertions to use new slug names
- [x] updated test promise commands to use new slugs

### acceptance
- [x] type checks pass (`npm run test:types`)
- [x] build passes
- [x] tests [t5] and [t8] pass - verify guard templates show correct slugs

### note: failing tests
tests [t3], [t4], [t6], [t7], [t9], [t10] fail due to bhrain promise/judge mechanism issue. test [t3] uses unchanged `all-real-junior` slug and also fails, confirming this is a prior issue unrelated to template changes.

---

## done criteria

- [x] `5.1.execution.phase0_to_phaseN.v1.guard` has standardized 4-review frame
- [x] `3.3.blueprint.v1.guard` has standardized 4-review frame
- [x] build passes
- [x] type checks pass
- [x] tests [t5], [t8] pass (verify slug changes work)

---

## files changed

| file | change |
|------|--------|
| `src/.../templates/5.1.execution.phase0_to_phaseN.v1.guard` | 4 standardized reviews (vision+criteria+blueprint) |
| `src/.../templates/3.3.blueprint.v1.guard` | 4 standardized reviews (vision+criteria only) |
| `blackbox/.../skill.init.behavior.guards.acceptance.test.ts` | updated slugs and assertions |
| `blackbox/.../__snapshots__/...` | updated snapshots |
