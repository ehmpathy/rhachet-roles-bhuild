# blackbox criteria matrix: catch.dream ğŸŒ™

## matrix.1 = core catch operation

covers: episode.1, episode.2, episode.6

| ind: dream exists? | ind: --open provided? | ind: .dream/ exists? | dep: file action | dep: output label | dep: editor line     | dep: folder action                               |
| ------------------ | --------------------- | -------------------- | ---------------- | ----------------- | -------------------- | ------------------------------------------------ |
| no                 | yes                   | yes                  | created          | "ğŸŒ™ dream caught"  | "opened in $editor"  | â€”                                                |
| no                 | yes                   | no                   | created          | "ğŸŒ™ dream caught"  | "opened in $editor"  | created + .readme.md findserted                  |
| no                 | no                    | yes                  | created          | "ğŸŒ™ dream caught"  | "tip: use --open..." | â€”                                                |
| no                 | no                    | no                   | created          | "ğŸŒ™ dream caught"  | "tip: use --open..." | created + .readme.md findserted                  |
| yes                | yes                   | yes                  | found (no new)   | "ğŸŒ™ dream found"   | "opened in $editor"  | â€”                                                |
| yes                | yes                   | no                   | â€”                | â€”                 | â€”                    | âš ï¸ impossible: dream exists implies folder exists |
| yes                | no                    | yes                  | found (no new)   | "ğŸŒ™ dream found"   | "tip: use --open..." | â€”                                                |
| yes                | no                    | no                   | â€”                | â€”                 | â€”                    | âš ï¸ impossible: dream exists implies folder exists |

**gaps**: none â€” impossible states correctly excluded

---

## matrix.2 = fuzzy match recovery

covers: episode.3

this matrix has 4 independent dimensions â€” at the boundary of decomposition signal, but acceptable since the flow is inherently sequential (user decisions cascade).

| ind: fuzzy matches? | ind: user reuse selection | ind: new file has content? | ind: append selection | dep: new file fate | dep: content action | dep: file opened |
| ------------------- | ------------------------- | -------------------------- | --------------------- | ------------------ | ------------------- | ---------------- |
| no                  | â€”                         | â€”                          | â€”                     | kept               | â€”                   | new file         |
| yes                 | "n"                       | â€”                          | â€”                     | kept               | â€”                   | new file         |
| yes                 | "1" (or "2")              | no                         | â€”                     | deleted            | â€”                   | prior dream      |
| yes                 | "1" (or "2")              | yes                        | "y"                   | deleted            | appended to prior   | prior dream      |
| yes                 | "1" (or "2")              | yes                        | "n"                   | kept               | â€”                   | â€” (both kept)    |

**gaps**: none

**note**: "ind: user reuse selection" and "ind: append selection" are sequential user inputs, not simultaneous conditions. the matrix captures the decision tree flattened.

---

## matrix.3 = input normalization

covers: episode.4

| ind: input format                | dep: normalized output      |
| -------------------------------- | --------------------------- |
| kebab-case (`config-reload`)     | `config-reload` (unchanged) |
| spaces (`Config Hot Reload`)     | `config-hot-reload`         |
| uppercase (`CONFIG-RELOAD`)      | `config-reload`             |
| special chars (`config@reload!`) | `config-reload-`            |
| mixed (`Config@Hot Reload!`)     | `config-hot-reload-`        |

**gaps**:
- âš ï¸ **prefix/suffix special chars** â€” e.g., `@config@` â†’ `config` or `-config-`? not specified
- âš ï¸ **consecutive special chars** â€” e.g., `config@@reload` â†’ `config--reload` or `config-reload`? not specified
- âš ï¸ **numbers** â€” e.g., `config2reload` â†’ preserved or stripped? not specified

**recommendation**: add criteria for edge normalization cases

---

## matrix.4 = error scenarios

covers: episode.5

| ind: in git repo? | ind: --name provided? | ind: editor valid? | dep: file created? | dep: error message                          |
| ----------------- | --------------------- | ------------------ | ------------------ | ------------------------------------------- |
| no                | yes                   | yes                | no                 | "no git repo found"                         |
| no                | yes                   | no                 | no                 | "no git repo found"                         |
| no                | no                    | â€”                  | no                 | "no git repo found" (or "--name required"?) |
| yes               | no                    | â€”                  | no                 | "--name is required"                        |
| yes               | yes                   | no                 | yes                | "âš ï¸ $editor not found, file at: ..."         |
| yes               | yes                   | yes                | yes                | (success, no error)                         |

**gaps**:
- âš ï¸ **outside repo + no --name** â€” which error takes priority? not specified

**recommendation**: specify error precedence (repo check before name check)

---

## matrix.5 = output structure

covers: exchange.1, exchange.2

| ind: outcome | dep: emoji | dep: tree root                  | dep: tree branch 1  | dep: tree branch 2 |
| ------------ | ---------- | ------------------------------- | ------------------- | ------------------ |
| dream caught | ğŸŒ™          | "dream caught"                  | file path           | editor status      |
| dream found  | ğŸŒ™          | "dream found"                   | file path           | editor status      |
| fuzzy match  | ğŸ’­          | "related dreams from past week" | numbered dream list | "reuse? [1/2/n]:"  |

**gaps**: none â€” structure is consistent

---

## decomposition assessment

| matrix                   | dimensions | combinations | status                              |
| ------------------------ | ---------- | ------------ | ----------------------------------- |
| matrix.1 (core catch)    | 3          | 8 (6 valid)  | âœ… clean                             |
| matrix.2 (fuzzy match)   | 4          | 5 paths      | âœ… acceptable (sequential decisions) |
| matrix.3 (normalization) | 1          | 5+           | âœ… clean, but gaps noted             |
| matrix.4 (errors)        | 3          | 6            | âœ… clean, but precedence gap         |
| matrix.5 (output)        | 1          | 3            | âœ… clean                             |

**overall**: no decomposition needed â€” dimensions are well-bounded. address noted gaps in criteria.

---

## summary of gaps

1. **normalization edge cases**: prefix/suffix special chars, consecutive special chars, numbers
2. **error precedence**: which error surfaces first when multiple conditions fail?
3. **outside repo + no name**: clarify error priority

ğŸŒ™
