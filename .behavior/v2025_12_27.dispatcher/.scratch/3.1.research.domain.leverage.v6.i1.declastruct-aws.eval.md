# leverage evaluation: declastruct-aws

**source:** https://github.com/ehmpathy/declastruct-aws


---


## 1. tool description

declastruct-aws enables declarative control of AWS resources through code:
- declare desired state via typescript (DeclaredAwsLambda, DeclaredAwsIamRole, etc)
- plan to preview infrastructure changes
- apply to execute modifications
- built-in versioning and rollback for lambdas
- VPC tunnel management via SSM


---


## 2. leverage narrative

### 2.1. what problem does it solve?

managing AWS infrastructure by hand is:
- **error-prone**: manual clicks lead to configuration drift
- **unreproducible**: what was deployed? when? by whom?
- **risky**: no preview before changes; hard to rollback
- **slow**: navigating console, remembering settings

### 2.2. how does it create leverage?

declastruct-aws moves infrastructure from **adhoc clicks** to **declarative code**:

```
wout declastruct-aws:
  per deployment: navigate console, click through settings
  rollback: hope you remember previous config
  audit: "who changed what?" unknown

with declastruct-aws:
  per deployment: `declastruct apply` (seconds)
  rollback: `declastruct apply` with previous version
  audit: git history shows all changes
```

**leverage ratio:** ~10-50x for deployment velocity, ∞ for audit/rollback

### 2.3. where does leverage compound?

1. **safer → faster**: plan phase prevents mistakes before they happen
2. **observable → supportable**: git history = full audit trail
3. **evolvable → maintainable**: version management enables safe rollbacks


---


## 3. leverage measurements

### 3.1. leverage.authorable

| subdimension | score | rationale |
|--------------|-------|-----------|
| **simpler** | 8/10 | typescript declarations vs console clicks |
| **faster** | 9/10 | seconds to deploy vs minutes in console |
| **safer** | 10/10 | plan phase prevents mistakes; git tracks all changes |

**composite:** 9.0/10

**narrative:** "declare infrastructure in typescript. plan shows exactly what will change. apply makes it so. git tracks everything."


### 3.2. leverage.supportable

| subdimension | score | rationale |
|--------------|-------|-----------|
| **observable** | 9/10 | git history shows who changed what when |
| **intuitive** | 7/10 | requires learning declastruct patterns |
| **resilient** | 9/10 | version aliases enable instant rollback |
| **maintainable** | 9/10 | declarative code is self-documenting |

**composite:** 8.5/10

**narrative:** "when something breaks, git shows exactly what changed. rollback is one command away."


### 3.3. leverage.adoptable

| subdimension | score | rationale |
|--------------|-------|-----------|
| **reusable** | 8/10 | patterns work across any AWS project |
| **pitofsuccess** | 9/10 | plan phase catches mistakes; version management prevents lock-in |
| **documented** | 7/10 | README covers basics; advanced patterns need exploration |
| **evolvable** | 9/10 | declarative approach adapts to new AWS resources |

**composite:** 8.3/10

**narrative:** "adopt declarative infrastructure across any AWS project. plan phase catches mistakes. versions prevent lock-in."


---


## 4. gain analysis

### 4.1. absolute gain per use

| metric | wout declastruct | with declastruct | gain |
|--------|------------------|------------------|------|
| deployment time | 10-30 min (console) | 30 sec | 20-60x |
| rollback capability | hope + manual | `apply` previous version | ∞ |
| audit trail | cloudtrail (complex) | git history | 10x simpler |
| configuration drift | common | impossible | ∞ |

**absolute gain per use:** ~30x deployment velocity, ∞ for rollback/audit


### 4.2. relative frequency (how often we gain)

| scenario | frequency | notes |
|----------|-----------|-------|
| lambda deployments | very high | daily in active development |
| infrastructure changes | medium | IAM, VPC, etc |
| rollbacks | low but critical | production incidents |
| audits | medium | security reviews, debugging |

**coverage:** every AWS deployment benefits


### 4.3. compound leverage

```
total_leverage = absolute_gain × frequency × compound_factor

where:
  absolute_gain = 30x (deployment velocity)
  frequency = 0.7 (70% of infra work is deployments)
  compound_factor = 2.0 (audit + rollback value)

total_leverage = 30 × 0.7 × 2.0 = 42x effective leverage
```


---


## 5. dimension summary

| dimension | score | key insight |
|-----------|-------|-------------|
| leverage.authorable | 9.0/10 | plan + apply workflow with git audit |
| leverage.supportable | 8.5/10 | git history; instant rollback |
| leverage.adoptable | 8.3/10 | declarative patterns across AWS projects |

**overall leverage grade:** A- (8.6/10)

**one-sentence summary:** declastruct-aws provides ~42x effective leverage by replacing console clicks with declarative code, adding plan-phase safety and instant rollback capability.

