# dispatcher test coverage plan

## objective

create comprehensive integration test coverage for all dispatcher skills:
- gather, deptrace, measure, prioritize, coordinate, triage

## status

| skill | operation | test type | status |
|-------|-----------|-----------|--------|
| **gather** | | | |
| | `enumBehaviorDirs` | unit | [x] created |
| | `getAllBehaviorGathered` | integration | [x] created |
| | `getOneBehaviorGathered` | integration | [x] created |
| | `computeBehaviorGatheredContentHash` | unit | [x] created |
| | `getBehaviorGatheredFileContent` | unit | [x] exists |
| | `parseBehaviorDir` | unit | [x] exists |
| **deptrace** | | | |
| | `getOneBehaviorDeptraced` | integration | [x] exists (2 cases) |
| | `computeBehaviorDeptracedTransitiveDeps` | brain.integration | [x] created |
| | `parseBehaviorDeptracedDependencies` | brain.integration | [x] created |
| | `renderBehaviorDeptracedDependenciesMd` | unit | [x] created |
| **measure** | | | |
| | `getOneBehaviorMeasured` | integration | [x] exists (1 case) |
| | `imagineBehaviorMeasuredCostAttend` | integration | [x] exists (2 cases) |
| | `imagineBehaviorMeasuredCostExpend` | integration | [x] exists (2 cases) |
| | `imagineBehaviorMeasuredGainLeverage` | integration | [x] exists (2 cases) |
| | `imagineBehaviorMeasuredGainYieldage` | integration | [x] exists (2 cases) |
| | `assignBehaviorMeasuredPriority` | unit | [x] created |
| | `computeBehaviorMeasuredCostComposite` | unit | [x] created |
| | `computeBehaviorMeasuredGainComposite` | unit | [x] created |
| | `computeBehaviorMeasuredReverseDeps` | unit | [x] created |
| **prioritize** | | | |
| | `getAllBehaviorPrioritized` | brain.integration | [x] created |
| | `archiveBehaviorIfChanged` | unit | [x] created |
| **coordinate** | | | |
| | `getAllBehaviorCoordinated` | unit | [x] created |
| | `groupBehaviorWorkstreams` | unit | [x] created |
| | `rankBehaviorWorkstreams` | unit | [x] created |
| | `renderBehaviorWorkstreamCoordinationMd` | unit | [x] created |
| **triage** | | | |
| | `getAllBehaviorTriaged` | unit | [x] created |
| | `computeBehaviorTriagedBandwidth` | unit | [x] created |
| | `computeBehaviorTriagedReadiness` | unit | [x] created |
| | `renderBehaviorTriagedPrioritizationMd` | unit | [x] created |

## execution log

**completed: 2025-12-30**

### phase 1: gather tests ✓

| test file | status | tests |
|-----------|--------|-------|
| enumBehaviorDirs.test.ts | ✓ passed | 4 |
| computeBehaviorGatheredContentHash.test.ts | ✓ passed | 4 |
| getOneBehaviorGathered.integration.test.ts | ✓ passed | 5 |
| getAllBehaviorGathered.integration.test.ts | ✓ passed | 7 |

### phase 2: deptrace tests ✓

| test file | status | tests |
|-----------|--------|-------|
| renderBehaviorDeptracedDependenciesMd.test.ts | ✓ passed | 5 |
| parseBehaviorDeptracedDependencies.brain.case1.integration.test.ts | ✓ created | 1 |
| computeBehaviorDeptracedTransitiveDeps.brain.case1.integration.test.ts | ✓ created | 3 |

### phase 3: measure tests ✓

| test file | status | tests |
|-----------|--------|-------|
| assignBehaviorMeasuredPriority.test.ts | ✓ passed | 7 |
| computeBehaviorMeasuredCostComposite.test.ts | ✓ passed | 4 |
| computeBehaviorMeasuredGainComposite.test.ts | ✓ passed | 4 |
| computeBehaviorMeasuredReverseDeps.test.ts | ✓ passed | 5 |

### phase 4: prioritize tests ✓

| test file | status | tests |
|-----------|--------|-------|
| archiveBehaviorIfChanged.test.ts | ✓ passed | 5 |
| getAllBehaviorPrioritized.brain.case1.integration.test.ts | ✓ created | 3 |

### phase 5: coordinate tests ✓

| test file | status | tests |
|-----------|--------|-------|
| getAllBehaviorCoordinated.test.ts | ✓ passed | 6 |
| groupBehaviorWorkstreams.test.ts | ✓ passed | 5 |
| rankBehaviorWorkstreams.test.ts | ✓ passed | 5 |
| renderBehaviorWorkstreamCoordinationMd.test.ts | ✓ passed | 7 |

### phase 6: triage tests ✓

| test file | status | tests |
|-----------|--------|-------|
| getAllBehaviorTriaged.test.ts | ✓ passed | 6 |
| computeBehaviorTriagedBandwidth.test.ts | ✓ passed | 6 |
| computeBehaviorTriagedReadiness.test.ts | ✓ passed | 6 |
| renderBehaviorTriagedPrioritizationMd.test.ts | ✓ passed | 6 |

---

### phase 7: brain integration tests ✓

| test file | status | tests |
|-----------|--------|-------|
| parseBehaviorDeptracedDependencies.brain.case1.integration.test.ts | ✓ created | 1 |
| computeBehaviorDeptracedTransitiveDeps.brain.case1.integration.test.ts | ✓ created | 3 |
| getAllBehaviorPrioritized.brain.case1.integration.test.ts | ✓ created | 3 |

### test assets created

| asset | purpose |
|-------|---------|
| `example.org/high-value-core-api` | high yieldage + high leverage behavior |
| `example.org/high-value-checkout` | high yieldage + high leverage behavior |
| `example.org/low-value-internal-docs` | low yieldage + low leverage behavior |
| `example.org/low-value-code-cleanup` | low yieldage + low leverage behavior |

---

### summary

- **total test suites created**: 21
- **total unit tests passing**: 85
- **total integration tests passing**: 12
- **brain integration tests created**: 3 files (7 tests)
- **test assets created**: 4 (example.org behaviors for prioritization testing)

---

*created: 2025-12-30*
*updated: 2025-12-30 - added brain integration tests and example.org test assets*
