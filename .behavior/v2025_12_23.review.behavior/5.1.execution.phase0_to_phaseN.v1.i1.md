# execution: review.behavior

## phase.0 = scaffolding

### status: complete

### tasks

- [x] 0.1: create `src/domain.roles/behaver/briefs/practices/behavior.wish/` directory
- [x] 0.2: create `src/domain.roles/behaver/briefs/practices/behavior.criteria/` directory
- [x] 0.3: create `src/domain.roles/behaver/briefs/practices/behavior.blueprint/` directory
- [x] 0.4: create `src/domain.roles/behaver/briefs/practices/behavior.roadmap/` directory
- [x] 0.5: scaffold `rule.prefer.clear-desires.md` in behavior.wish/
- [x] 0.6: scaffold `rule.prefer.bounded-scope.md` in behavior.wish/
- [x] 0.7: scaffold `rule.require.bdd-format.md` in behavior.criteria/
- [x] 0.8: scaffold `rule.prefer.usecase-groups.md` in behavior.criteria/
- [x] 0.9: scaffold `rule.prefer.depth-groups.md` in behavior.criteria/
- [x] 0.10: scaffold `rule.prefer.dependency-order.md` in behavior.criteria/
- [x] 0.11: scaffold `rule.require.test-coverage-specified.md` in behavior.blueprint/
- [x] 0.12: scaffold `rule.require.test-patterns-specified.md` in behavior.blueprint/
- [x] 0.13: scaffold `rule.require.determinism-declared.md` in behavior.blueprint/
- [x] 0.14: scaffold `rule.require.criteria-satisfied.md` in behavior.blueprint/
- [x] 0.15: scaffold `rule.prefer.dependency-order.md` in behavior.roadmap/
- [x] 0.16: scaffold `rule.prefer.clear-deliverables.md` in behavior.roadmap/

---

## phase.1 = rule briefs

### status: complete

### tasks

- [x] 1.1: implement `rule.prefer.clear-desires.md` content
- [x] 1.2: implement `rule.prefer.bounded-scope.md` content
- [x] 1.3: implement `rule.require.bdd-format.md` content
- [x] 1.4: implement `rule.prefer.usecase-groups.md` content
- [x] 1.5: implement `rule.prefer.depth-groups.md` content
- [x] 1.6: implement `rule.prefer.dependency-order.md` content (criteria)
- [x] 1.7: implement `rule.require.test-coverage-specified.md` content
- [x] 1.8: implement `rule.require.test-patterns-specified.md` content
- [x] 1.9: implement `rule.require.determinism-declared.md` content
- [x] 1.10: implement `rule.require.criteria-satisfied.md` content
- [x] 1.11: implement `rule.prefer.dependency-order.md` content (roadmap)
- [x] 1.12: implement `rule.prefer.clear-deliverables.md` content

---

## phase.2 = composite skill

### status: complete

### tasks

- [x] 2.1: create `review.behavior.sh` with header comment block
- [x] 2.2: implement argument parsing (--of, --against, --interactive, --dir)
- [x] 2.3: implement behavior directory resolution from --of
- [x] 2.4: implement artifact file resolution per --against targets
- [x] 2.5: implement bhrain review invocation loop
- [x] 2.6: implement feedback aggregation
- [x] 2.7: implement log output to `.log/bhuild/review.behavior/`
- [x] 2.8: implement spinner animation for non-interactive mode
- [x] 2.9: implement tree-structured status output
- [x] 2.10: create integration test file `review.behavior.integration.test.ts`
- [x] 2.11: test --against wish creates feedback file
- [x] 2.12: test --against criteria creates feedback file
- [x] 2.13: test --against blueprint creates feedback file
- [x] 2.14: test --against roadmap creates feedback file
- [x] 2.15: test missing artifact warns but continues
- [x] 2.16: test ambiguous behavior name fails fast
- [x] 2.17: test missing --of fails with usage
- [x] 2.18: test no .behavior directory fails fast
- [x] 2.19: test behavior not found lists available
- [x] 2.20: test --help shows usage
- [x] 2.21: create fixture `behavior-with-violations` (vague wish, no BDD criteria)
- [x] 2.22: create fixture `behavior-well-formed` (clear wish, proper BDD criteria)
- [x] 2.23: test violations produce blocker in feedback
- [x] 2.24: test well-formed produces no blockers

### notes
- integration tests use new fixtures for positive/negative rule violation detection
- tests invoke claude (2-min timeout per test) for full integration verification

---

## phase.3 = symlinks + registration

### status: complete

### tasks

- [x] 3.1: verify skill is accessible via rhachet (compiled to dist/)
- [x] 3.2: ensure briefs are compiled to dist/
- [x] 3.3: update skill to resolve rules from SCRIPT_DIR (no symlink required)

### notes
- skill now resolves briefs relative to its own location via SCRIPT_DIR
- briefs path: $SCRIPT_DIR/../briefs/practices/behavior.*/rule.*.md
- no .agent symlink required - skill finds rules directly

---

## phase.4 = validation

### status: complete

### tasks

- [x] 4.1: verify skill structure is correct in dist/
- [x] 4.2: verify briefs are compiled to correct location
- [x] 4.3: verify skill can find rules via BRIEFS_DIR

### verification results

```
dist/domain.roles/behaver/
├── briefs/
│   └── practices/
│       ├── behavior.blueprint/ (4 rules)
│       ├── behavior.criteria/ (4 rules)
│       ├── behavior.roadmap/ (2 rules)
│       └── behavior.wish/ (2 rules)
├── getBehaverRole.js
└── skills/
    ├── init.behavior.sh
    ├── review.behavior.sh  ← new
    └── review.deliverable.sh
```

### invocation

```sh
npx rhachet run --repo bhuild --skill review.behavior --of <behavior-name>
```

---

## summary

| phase | status | tasks |
|-------|--------|-------|
| 0 scaffolding | complete | 16/16 |
| 1 rule briefs | complete | 12/12 |
| 2 composite skill | complete | 24/24 |
| 3 symlinks | complete | 3/3 |
| 4 validation | complete | 3/3 |

total: 58 tasks complete

