# blackbox criteria: give-feedback-opener

## usecase.1 = create feedback when none exists

```
given('no feedback exists for the artifact')
  when('give.feedback is called without --version')
    then('creates v1 feedback file')
      sothat('user can write their first round of feedback')
    then('stdout shows tree with âœ“ and filename')
      sothat('user sees confirmation of what was created')
    then('stdout shows tip: use --version ++ to create a new version')
      sothat('user learns how to create subsequent versions')
```

## usecase.2 = open latest feedback when it exists

```
given('feedback v1 exists for the artifact')
  when('give.feedback is called without --version')
    then('opens v1 (the latest)')
      sothat('user can continue where they left off')
    then('stdout shows tree with âœ“ and filename')
    then('stdout shows tip: use --version ++ to create a new version')

given('feedback v1 and v2 exist for the artifact')
  when('give.feedback is called without --version')
    then('opens v2 (the latest)')
      sothat('user always lands on most recent feedback')
    then('stdout shows tree with âœ“ and v2 filename')
    then('stdout shows tip: use --version ++ to create a new version')
```

## usecase.3 = create new version with --version ++

```
given('feedback v1 exists for the artifact')
  when('give.feedback is called with --version ++')
    then('creates v2 feedback file')
      sothat('user can start a fresh round of feedback')
    then('stdout shows tree with âœ“ and v2 filename')
    then('stdout shows tip: use --version ++ to create a new version')

given('feedback v1 and v2 exist for the artifact')
  when('give.feedback is called with --version ++')
    then('creates v3 feedback file')
    then('stdout shows tree with âœ“ and v3 filename')
```

## usecase.4 = open specific version with --version N

```
given('feedback v1 and v2 exist for the artifact')
  when('give.feedback is called with --version 1')
    then('opens v1 (not latest)')
      sothat('user can revisit earlier feedback')
    then('stdout shows tree with âœ“ and v1 filename')
```

## usecase.5 = open with editor via --open

```
given('feedback v1 exists for the artifact')
  when('give.feedback is called with --open codium')
    then('opens feedback file in codium')
      sothat('user goes straight to edit without copy/paste')
    then('stdout shows "opened in codium" as last line')

given('no feedback exists for the artifact')
  when('give.feedback is called with --open vim')
    then('creates v1 feedback file')
    then('opens feedback file in vim')
    then('stdout shows "opened in vim" as last line')
```

## usecase.6 = show opener tip when --open not specified

```
given('feedback v1 exists for the artifact')
  when('give.feedback is called without --open')
    then('stdout shows "tip: use --open nvim to open automatically" as last line')
      sothat('user learns about the --open option')
```

## usecase.7 = output format

```
given('any call to give.feedback succeeds')
  when('stdout is rendered')
    then('first line is "ðŸ¦« wassup?"')
    then('paths shown are relative, not absolute')
      sothat('output is scannable and tidy')
    then('filename shown is just the filename, not full path')
    then('tree structure uses â”œâ”€ and â””â”€ connectors')
```

## usecase.8 = error: invalid editor

```
given('give.feedback is called with --open nonexistent-editor')
  when('the editor is not available')
    then('shows error message about opener unavailable')
    then('does not crash â€” feedback file is still created/found')
```

## usecase.9 = error: empty --open value

```
given('give.feedback is called with --open ""')
  when('the value is empty')
    then('shows error: --open requires an editor name')
    then('exits with non-zero status')
```
