# vision: give-feedback-opener

## the outcome world

### before

when you call `give.feedback`, it dumps raw absolute paths and minimal context:

```
âœ“ feedback created: /home/vlad/git/ehmpathy/_worktrees/rhachet.vlad.hook-adapter/.behavior/v2026_01_09.hook-adapter/5.1.execution.phase0_to_phaseN.v1.i1.md.[feedback].v1.[given].by_human.md
  against: /home/vlad/git/ehmpathy/_worktrees/rhachet.vlad.hook-adapter/.behavior/v2026_01_09.hook-adapter/5.1.execution.phase0_to_phaseN.v1.i1.md
```

- long paths make it hard to scan
- no opener integration â€” have to copy/paste path manually
- crashes if feedback already exists â€” friction for repeated calls

### after

a friendly beaver greets you with a tidy tree of relative paths:

```
ðŸ¦« wassup?
   â”œâ”€ âœ“ 5.1.execution.phase0_to_phaseN.v1.i1.md.[feedback].v1.[given].by_human.md
   â”œâ”€ tip: use --version ++ to create a new version
   â””â”€ opened in codium
```

or if --open is not specified:

```
ðŸ¦« wassup?
   â”œâ”€ âœ“ 5.1.execution.phase0_to_phaseN.v1.i1.md.[feedback].v1.[given].by_human.md
   â”œâ”€ tip: use --version ++ to create a new version
   â””â”€ tip: use --open nvim to open automatically
```

or if feedback found (idempotent):

```
ðŸ¦« wassup?
   â”œâ”€ âœ“ 5.1.execution.phase0_to_phaseN.v1.i1.md.[feedback].v1.[given].by_human.md
   â”œâ”€ tip: use --version ++ to create a new version
   â””â”€ opened in codium
```

### aha moment

the aha clicks when you call `give.feedback` twice in a row:
- first call creates v1 and opens it
- second call opens latest (v1), reminds you `--version ++` to create v2
- no error, no friction â€” just flow

## user experience

### usecases

| goal | invocation | outcome |
|------|------------|---------|
| create feedback for execution | `--against execution` | creates v1 feedback file |
| open automatically | `--against execution --open codium` | creates + opens in codium |
| reopen latest feedback | `--against execution --open vim` | finds latest version, opens in vim |
| create next version | `--against execution --version ++` | creates v2 (or v3, etc.) |

### contract inputs

| arg | required | purpose |
|-----|----------|---------|
| `--against <name>` | yes | artifact to give feedback on |
| `--behavior <name>` | no | explicit behavior (else from branch bind) |
| `--version <N\|++>` | no | feedback version: number, or `++` to increment (default: latest, or 1 if none exist) |
| `--template <path>` | no | custom template file |
| `--open <editor>` | no | open feedback file in editor |
| `--force` | no | override bind mismatch |

### contract output

stdout tree with:
1. status symbol: `âœ“` (created or found)
2. feedback filename (relative, just the filename)
3. version tip (always present)
4. opener tip or confirmation

### timeline

1. user finishes an execution phase
2. `npx rhachet run --skill give.feedback --against execution --open codium`
3. sees friendly output, file opens in codium
4. writes feedback, closes file
5. calls again accidentally â€” file still opens, no error

## mental model

### how users describe it

> "give.feedback lets me write structured feedback on any behavior artifact. it creates a template, opens my editor, and doesn't yell at me if i run it twice."

### analogies

- like `git add` â€” idempotent, runs the same whether file is staged or not
- like `touch` â€” creates if absent, no-op if exists
- like `open .` â€” opens what you're at, doesn't care how many times

### terms

| we say | users might say |
|--------|-----------------|
| findsert | "just open it" |
| idempotent | "run it again, same result" |
| feedback artifact | "my review file" |

## evaluation

### pros

- friction-free repeated calls
- tidy relative paths easy to scan
- --open integration saves copy/paste
- version tip teaches the version workflow
- matches init.behavior output style (consistent appexp)

### cons

- beaver emoji might be unexpected (but it's friendly and distinctive)
- no explicit confirmation whether file was created or found â€” same `âœ“` either way

### edgecases

| scenario | behavior |
|----------|----------|
| no feedback exists, call without --version | creates v1, shows `âœ“`, shows --version ++ tip |
| feedback v1 exists, call without --version | opens v1 (latest), shows `âœ“`, shows --version ++ tip |
| feedback v1+v2 exist, call without --version | opens v2 (latest), shows `âœ“`, shows --version ++ tip |
| feedback v1 exists, call with --version 1 | opens v1, shows `âœ“`, shows --version ++ tip |
| feedback v1 exists, call with --version ++ | creates v2, shows `âœ“`, shows --version ++ tip |
| feedback v1+v2 exist, call with --version ++ | creates v3, shows `âœ“`, shows --version ++ tip |
| --open with invalid editor | error message like init.behavior (opener unavailable) |
| --open with empty string | error: `--open requires an editor name` |

### pit of success

- can't accidentally create duplicate feedback (version increment is explicit)
- can't lose work by call twice (idempotent)
- always reminded how to create next version (tip line)
- always reminded how to open automatically (tip line if no --open)
